{"ast":null,"code":"import React, { Component } from 'react';\nimport ReactDoM from 'react-dom';\nimport firebase from './Firestore';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nconst PushChallenge = (chal, index) => {\n  // let pchallenge = props.challenge;\n  // let challengeindex = props.index;\n  let pchallenge = chal;\n  let challengeindex = index;\n  let newchallenge = {\n    name: pchallenge.Title,\n    value: pchallenge.value,\n    timestamp: new Date(Date.now())\n  };\n  firebase.auth().onAuthStateChanged(user => {\n    if (user) {\n      const db = firebase.firestore();\n      const userRef = db.collection(\"UserData\");\n      userRef.doc(user.uid).get().then(getDoc => {\n        /*userRef.doc(user.uid).challenge.push(newchallenge)*/\n        let addchallenge = getDoc.data().challenge;\n        addchallenge.push(newchallenge);\n        let newdailydata = [];\n        getDoc.data().dailychallenge.forEach(element => {\n          if (element.index == challengeindex) {\n            newdailydata.push({\n              complete: true,\n              index: element.index\n            });\n          } else {\n            newdailydata.push(element);\n          }\n        });\n        let currfootprint = getDoc.data().footprint;\n        let newfootprint = [];\n\n        for (var i = 0; i < currfootprint.length - 1; i++) {\n          newfootprint.push(currfootprint[i]);\n        }\n\n        newfootprint.push({\n          timestamp: currfootprint[currfootprint.length - 1].timestamp,\n          value: currfootprint[currfootprint.length - 1].value * 0.8\n        });\n        console.log(addchallenge);\n        userRef.doc(user.uid).set({\n          username: getDoc.data().username,\n          email: getDoc.data().email,\n          footprint: newfootprint,\n          challenge: addchallenge,\n          dailychallenge: newdailydata,\n          cfnum: getDoc.data().cfnum\n        });\n      });\n    }\n  });\n};\n\nexport default PushChallenge;","map":{"version":3,"sources":["/Users/shellyganga/Desktop/websiteProj/varearth/src/pushchallenge.js"],"names":["React","Component","ReactDoM","firebase","StyledFirebaseAuth","PushChallenge","chal","index","pchallenge","challengeindex","newchallenge","name","Title","value","timestamp","Date","now","auth","onAuthStateChanged","user","db","firestore","userRef","collection","doc","uid","get","then","getDoc","addchallenge","data","challenge","push","newdailydata","dailychallenge","forEach","element","complete","currfootprint","footprint","newfootprint","i","length","console","log","set","username","email","cfnum"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;;AAEA,MAAMC,aAAa,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAErC;AACA;AACA,MAAIC,UAAU,GAAGF,IAAjB;AACA,MAAIG,cAAc,GAAGF,KAArB;AACA,MAAIG,YAAY,GAAG;AACjBC,IAAAA,IAAI,EAAEH,UAAU,CAACI,KADA;AAEjBC,IAAAA,KAAK,EAAEL,UAAU,CAACK,KAFD;AAGjBC,IAAAA,SAAS,EAAE,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAAL,EAAT;AAHM,GAAnB;AAOAb,EAAAA,QAAQ,CAACc,IAAT,GAAgBC,kBAAhB,CAAmCC,IAAI,IAAI;AACzC,QAAGA,IAAH,EAAQ;AAEN,YAAMC,EAAE,GAAGjB,QAAQ,CAACkB,SAAT,EAAX;AAEA,YAAMC,OAAO,GAAGF,EAAE,CAACG,UAAH,CAAc,UAAd,CAAhB;AAEAD,MAAAA,OAAO,CAACE,GAAR,CAAYL,IAAI,CAACM,GAAjB,EAAsBC,GAAtB,GAA4BC,IAA5B,CAAiCC,MAAM,IAAI;AAEzC;AACA,YAAIC,YAAY,GAAGD,MAAM,CAACE,IAAP,GAAcC,SAAjC;AACAF,QAAAA,YAAY,CAACG,IAAb,CAAkBtB,YAAlB;AAEA,YAAIuB,YAAY,GAAG,EAAnB;AACAL,QAAAA,MAAM,CAACE,IAAP,GAAcI,cAAd,CAA6BC,OAA7B,CAAqCC,OAAO,IAAI;AAC9C,cAAGA,OAAO,CAAC7B,KAAR,IAAiBE,cAApB,EAAmC;AACjCwB,YAAAA,YAAY,CAACD,IAAb,CAAkB;AAChBK,cAAAA,QAAQ,EAAE,IADM;AAEhB9B,cAAAA,KAAK,EAAE6B,OAAO,CAAC7B;AAFC,aAAlB;AAID,WALD,MAKK;AACH0B,YAAAA,YAAY,CAACD,IAAb,CAAkBI,OAAlB;AACD;AACF,SATD;AAWA,YAAIE,aAAa,GAAGV,MAAM,CAACE,IAAP,GAAcS,SAAlC;AACA,YAAIC,YAAY,GAAG,EAAnB;;AACA,aAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGH,aAAa,CAACI,MAAd,GAAqB,CAAxC,EAA2CD,CAAC,EAA5C,EAA+C;AAC7CD,UAAAA,YAAY,CAACR,IAAb,CAAkBM,aAAa,CAACG,CAAD,CAA/B;AACD;;AACDD,QAAAA,YAAY,CAACR,IAAb,CAAkB;AAChBlB,UAAAA,SAAS,EAAEwB,aAAa,CAACA,aAAa,CAACI,MAAd,GAAqB,CAAtB,CAAb,CAAsC5B,SADjC;AAEhBD,UAAAA,KAAK,EAAEyB,aAAa,CAACA,aAAa,CAACI,MAAd,GAAqB,CAAtB,CAAb,CAAsC7B,KAAtC,GAA4C;AAFnC,SAAlB;AAKA8B,QAAAA,OAAO,CAACC,GAAR,CAAYf,YAAZ;AACAP,QAAAA,OAAO,CAACE,GAAR,CAAYL,IAAI,CAACM,GAAjB,EAAsBoB,GAAtB,CAA0B;AACxBC,UAAAA,QAAQ,EAAElB,MAAM,CAACE,IAAP,GAAcgB,QADA;AAExBC,UAAAA,KAAK,EAAEnB,MAAM,CAACE,IAAP,GAAciB,KAFG;AAGxBR,UAAAA,SAAS,EAAEC,YAHa;AAIxBT,UAAAA,SAAS,EAAEF,YAJa;AAKxBK,UAAAA,cAAc,EAAED,YALQ;AAMxBe,UAAAA,KAAK,EAAEpB,MAAM,CAACE,IAAP,GAAckB;AANG,SAA1B;AAWD,OAxCD;AA0CD;AACF,GAlDD;AAoDD,CAjED;;AAqEA,eAAe3C,aAAf","sourcesContent":["import React, {Component} from 'react';\nimport ReactDoM from 'react-dom';\nimport firebase from './Firestore';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nconst PushChallenge = (chal, index) => {\n\n  // let pchallenge = props.challenge;\n  // let challengeindex = props.index;\n  let pchallenge = chal;\n  let challengeindex = index;\n  let newchallenge = {\n    name: pchallenge.Title,\n    value: pchallenge.value,\n    timestamp: new Date(Date.now())\n  }\n\n\n  firebase.auth().onAuthStateChanged(user => {\n    if(user){\n\n      const db = firebase.firestore();\n\n      const userRef = db.collection(\"UserData\");\n\n      userRef.doc(user.uid).get().then(getDoc => {\n\n        /*userRef.doc(user.uid).challenge.push(newchallenge)*/\n        let addchallenge = getDoc.data().challenge;\n        addchallenge.push(newchallenge);\n\n        let newdailydata = [];\n        getDoc.data().dailychallenge.forEach(element => {\n          if(element.index == challengeindex){\n            newdailydata.push({\n              complete: true,\n              index: element.index\n            })\n          }else{\n            newdailydata.push(element);\n          }\n        })\n\n        let currfootprint = getDoc.data().footprint;\n        let newfootprint = [];\n        for(var i = 0; i < currfootprint.length-1; i++){\n          newfootprint.push(currfootprint[i]);\n        }\n        newfootprint.push({\n          timestamp: currfootprint[currfootprint.length-1].timestamp,\n          value: currfootprint[currfootprint.length-1].value*0.8\n        })\n\n        console.log(addchallenge)\n        userRef.doc(user.uid).set({\n          username: getDoc.data().username,\n          email: getDoc.data().email,\n          footprint: newfootprint,\n          challenge: addchallenge,\n          dailychallenge: newdailydata,\n          cfnum: getDoc.data().cfnum\n        })\n\n\n\n      })\n\n    }\n  })\n\n}\n\n\n\nexport default PushChallenge;\n"]},"metadata":{},"sourceType":"module"}