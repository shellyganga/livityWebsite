{"ast":null,"code":"import React, { Component } from 'react';\nimport ReactDoM from 'react-dom';\nimport firebase from './Firestore';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nconst PushChallenge = (chal, index) => {\n  // let pchallenge = props.challenge;\n  // let challengeindex = props.index;\n  let pchallenge = chal;\n  let challengeindex = index;\n  let newchallenge = {\n    name: pchallenge.Title,\n    value: pchallenge.value,\n    timestamp: new Date(Date.now())\n  };\n  firebase.auth().onAuthStateChanged(user => {\n    if (user) {\n      const db = firebase.firestore();\n      const userRef = db.collection(\"UserData\");\n      userRef.doc(user.uid).get().then(getDoc => {\n        /*userRef.doc(user.uid).challenge.push(newchallenge)*/\n        let addchallenge = getDoc.data().challenge;\n        addchallenge.push(newchallenge);\n        let newdailydata = [];\n        getDoc.data().dailychallenge.forEach(element => {\n          if (element.index == challengeindex) {\n            newdailydata.push({\n              complete: true,\n              index: element.index\n            });\n          } else {\n            newdailydata.push(element);\n          }\n        });\n        console.log(addchallenge);\n        userRef.doc(user.uid).set({\n          username: getDoc.data().username,\n          email: getDoc.data().email,\n          footprint: getDoc.data().footprint,\n          challenge: addchallenge,\n          dailychallenge: newdailydata\n        });\n      });\n    }\n  });\n};\n\nexport default PushChallenge;","map":{"version":3,"sources":["/Users/shellyganga/Documents/cuproj/varearth/src/pushchallenge.js"],"names":["React","Component","ReactDoM","firebase","StyledFirebaseAuth","PushChallenge","chal","index","pchallenge","challengeindex","newchallenge","name","Title","value","timestamp","Date","now","auth","onAuthStateChanged","user","db","firestore","userRef","collection","doc","uid","get","then","getDoc","addchallenge","data","challenge","push","newdailydata","dailychallenge","forEach","element","complete","console","log","set","username","email","footprint"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;;AAEA,MAAMC,aAAa,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAErC;AACA;AACA,MAAIC,UAAU,GAAGF,IAAjB;AACA,MAAIG,cAAc,GAAGF,KAArB;AACA,MAAIG,YAAY,GAAG;AACjBC,IAAAA,IAAI,EAAEH,UAAU,CAACI,KADA;AAEjBC,IAAAA,KAAK,EAAEL,UAAU,CAACK,KAFD;AAGjBC,IAAAA,SAAS,EAAE,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAAL,EAAT;AAHM,GAAnB;AAOAb,EAAAA,QAAQ,CAACc,IAAT,GAAgBC,kBAAhB,CAAmCC,IAAI,IAAI;AACzC,QAAGA,IAAH,EAAQ;AAEN,YAAMC,EAAE,GAAGjB,QAAQ,CAACkB,SAAT,EAAX;AAEA,YAAMC,OAAO,GAAGF,EAAE,CAACG,UAAH,CAAc,UAAd,CAAhB;AAEAD,MAAAA,OAAO,CAACE,GAAR,CAAYL,IAAI,CAACM,GAAjB,EAAsBC,GAAtB,GAA4BC,IAA5B,CAAiCC,MAAM,IAAI;AAEzC;AACA,YAAIC,YAAY,GAAGD,MAAM,CAACE,IAAP,GAAcC,SAAjC;AACAF,QAAAA,YAAY,CAACG,IAAb,CAAkBtB,YAAlB;AAEA,YAAIuB,YAAY,GAAG,EAAnB;AACAL,QAAAA,MAAM,CAACE,IAAP,GAAcI,cAAd,CAA6BC,OAA7B,CAAqCC,OAAO,IAAI;AAC9C,cAAGA,OAAO,CAAC7B,KAAR,IAAiBE,cAApB,EAAmC;AACjCwB,YAAAA,YAAY,CAACD,IAAb,CAAkB;AAChBK,cAAAA,QAAQ,EAAE,IADM;AAEhB9B,cAAAA,KAAK,EAAE6B,OAAO,CAAC7B;AAFC,aAAlB;AAID,WALD,MAKK;AACH0B,YAAAA,YAAY,CAACD,IAAb,CAAkBI,OAAlB;AACD;AACF,SATD;AAWAE,QAAAA,OAAO,CAACC,GAAR,CAAYV,YAAZ;AACAP,QAAAA,OAAO,CAACE,GAAR,CAAYL,IAAI,CAACM,GAAjB,EAAsBe,GAAtB,CAA0B;AACxBC,UAAAA,QAAQ,EAAEb,MAAM,CAACE,IAAP,GAAcW,QADA;AAExBC,UAAAA,KAAK,EAAEd,MAAM,CAACE,IAAP,GAAcY,KAFG;AAGxBC,UAAAA,SAAS,EAAEf,MAAM,CAACE,IAAP,GAAca,SAHD;AAIxBZ,UAAAA,SAAS,EAAEF,YAJa;AAKxBK,UAAAA,cAAc,EAAED;AALQ,SAA1B;AAUD,OA7BD;AA+BD;AACF,GAvCD;AAyCD,CAtDD;;AA0DA,eAAe5B,aAAf","sourcesContent":["import React, {Component} from 'react';\nimport ReactDoM from 'react-dom';\nimport firebase from './Firestore';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nconst PushChallenge = (chal, index) => {\n\n  // let pchallenge = props.challenge;\n  // let challengeindex = props.index;\n  let pchallenge = chal;\n  let challengeindex = index;\n  let newchallenge = {\n    name: pchallenge.Title,\n    value: pchallenge.value,\n    timestamp: new Date(Date.now())\n  }\n\n\n  firebase.auth().onAuthStateChanged(user => {\n    if(user){\n\n      const db = firebase.firestore();\n\n      const userRef = db.collection(\"UserData\");\n\n      userRef.doc(user.uid).get().then(getDoc => {\n\n        /*userRef.doc(user.uid).challenge.push(newchallenge)*/\n        let addchallenge = getDoc.data().challenge;\n        addchallenge.push(newchallenge);\n\n        let newdailydata = [];\n        getDoc.data().dailychallenge.forEach(element => {\n          if(element.index == challengeindex){\n            newdailydata.push({\n              complete: true,\n              index: element.index\n            })\n          }else{\n            newdailydata.push(element);\n          }\n        })\n\n        console.log(addchallenge)\n        userRef.doc(user.uid).set({\n          username: getDoc.data().username,\n          email: getDoc.data().email,\n          footprint: getDoc.data().footprint,\n          challenge: addchallenge,\n          dailychallenge: newdailydata\n        })\n\n\n\n      })\n\n    }\n  })\n\n}\n\n\n\nexport default PushChallenge;\n"]},"metadata":{},"sourceType":"module"}